<!DOCTYPE html>
<html lang="en-us">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Using Cabin with the IBM Bluemix Container Service -- JeffSloyer.io</title>

    

    
    <link href="http://www.jeffsloyer.io//css/bootstrap.min.css" rel="stylesheet">

    
    <link href="http://www.jeffsloyer.io//css/clean-blog.min.css" rel="stylesheet">

    
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    
    
    

</head>

<body>

    
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://www.jeffsloyer.io/">JeffSloyer.io</a>
            </div>

                       
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    
                    <li>
                        <a href="http://www.jeffsloyer.io/">home</a>
                    </li>
                    
                    <li>
                        <a href="http://www.jeffsloyer.io/about/">About</a>
                    </li>
                    
                    <li>
                        <a href="http://www.jeffsloyer.io/speaking/">Speaking</a>
                    </li>
                    
                    <li>
                        <a href="http://www.jeffsloyer.io/post/">Archives</a>
                    </li>
                    
                  </ul>
            </div>
           

        </div>
        
    </nav>


    
    
    <header class="intro-header" style="background-image: url('http://www.jeffsloyer.io///original-images/cabin.jpg')">
      
      <div class="container">
        <div class="row">
           <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
             <div class="post-heading">
               <h1>Using Cabin With the IBM Bluemix Container Service</h1>
               <h2 class="subheading"></h2>
               <span class="meta">Posted by <a href="#">Jeff Sloyer</a> on Wed, Mar 29, 2017
                 <br />
                 In <a href="http://www.jeffsloyer.io/categories/tutorial" >Tutorial</a>, 

                 <br />
                 Tags <a href="http://www.jeffsloyer.io/tags/containers" >containers</a> <a href="http://www.jeffsloyer.io/tags/bluemix" >bluemix</a> <a href="http://www.jeffsloyer.io/tags/kubernetes" >kubernetes</a> 

               </span>
             </div>
           </div>
        </div>
      </div>
    </header>

    
    <article>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-md-10">
                  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<ins class="adsbygoogle"
   style="display:inline-block;width:728px;height:90px"
   data-ad-client="ca-pub-8023940796191232"
   data-ad-slot="8035315505"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


                  

<p>I haven&rsquo;t posted in awhile because I have taken a new role at IBM and helped lead the development of the
new IBM Bluemix Container Service that allows you to run managed Kubernetes clusters on IBM.</p>

<p>For a little background, IBM has introduced a managed Kubernetes Service, for more information
please read the announce post <a href="https://www.ibm.com/blogs/bluemix/2017/03/kubernetes-now-available-ibm-bluemix-container-service/">here</a>.</p>

<p><a href="http://www.skippbox.com/cabin/">Cabin</a> is a pretty cool mobile app that lets you manage your Kubernetes cluster through your Android or iPhone.  Check out the video below on a walkthrough of Cabin.</p>


<div style="position: relative; padding-bottom: 56.25%; padding-top: 30px; height: 0; overflow: hidden;">
  <iframe src="//www.youtube.com/embed/MzeEgu3gJRE" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" allowfullscreen frameborder="0" title="YouTube Video"></iframe>
 </div>


<h2 id="create-your-bluemix-account">Create your Bluemix account</h2>

<p>To get started you will first need a Bluemix account, head over to <a href="http://bluemix.net">bluemix.net</a> and sign up.</p>

<h2 id="cli-setup">CLI Setup</h2>

<p>Once you sign up you will need to download our CLI.  Head over to <a href="http://clis.ng.bluemix.net">http://clis.ng.bluemix.net</a> to download our installer.  Open the installer and go through the prompts to install the CLI.</p>

<p>Once you have the CLI you will need to login to the CLI, to do that do the following.</p>

<pre><code>bx login
</code></pre>

<p>It will ask for your username and password.  If you have an account already it might ask you to select an account, org, and space.</p>

<p>Once you are logged in you will need to download our plugin to create a Kubernetes cluster.  To do that do the following.</p>

<pre><code>bx plugin install container-service -r Bluemix
</code></pre>

<h2 id="create-your-kubernetes-cluster">Create your Kubernetes Cluster</h2>

<p>To create a free Kubernetes cluster run the following, replacing clustername with anything of your choosing:</p>

<pre><code>bx cs init
bx cs cluster-create --name clustername
</code></pre>

<p>If you had a paid account you can create a cluster with the following command.  It might ask you for VLAN&rsquo;s.  If it does you can get your available VLAN&rsquo;s by running <code>bx cs vlans dal10</code>.</p>

<pre><code>bx cs init
bx cs cluster-create --name clustername --datacenter dal10 --workers 3 --machine-type b1c.4x16
</code></pre>

<p>An example of choosing your own VLAN&rsquo;s you will see below.  Also, you can customize the machine type by listing all the available machine types, run <code>bx machine-types dal10</code>.  <strong>Note</strong> you will need to enter the VLAN ID.</p>

<pre><code>bx cs init
bx cs cluster-create --name clustername --datacenter dal10 --public-vlan 12356 --private-vlan 67891 --workers 3 --machine-type u1c.16x64
</code></pre>

<h2 id="setup-cabin">Setup Cabin</h2>

<p>The following instructions are quite hacky and we will be rolling out something more permanent and easier in the near future.</p>

<p>First you will need to download the cluster config for your Kubernetes cluster.  You will need to wait until the cluster is provisioned.  To see if it&rsquo;s been provisioned run <code>bx cs clusters</code>.  Under <code>state</code> it should show <code>deployed</code>.</p>

<p>Next, you will need to download the Kube config, to do that run what is below replacing <code>clustername</code> with the name of your cluster.</p>

<pre><code>bx cs cluster-config clustername
</code></pre>

<p>It will download a file and print out something like <code>export KUBECONFIG=/Users/jsloyer/.bluemix/plugins/container-service/clusters/jefftest/kube-config-prod-dal10-jefftest.yml</code>.  Run the command that it prints out, if you are on Windows it will be slightly different, it will start with <code>set</code>.</p>

<p>Next, you will need the hostname of your cluster, to get that run the following replacing <code>clustername</code> with the name of your cluster.</p>

<pre><code>bx cs cluster-get clustername
</code></pre>

<p>You will want to copy the <code>Master URL</code>.  I have pasted mine below omitting my port and part of my IP.</p>

<pre><code>$ bx cs cluster-get jefftest
Retrieving cluster jefftest...
OK
Name:		jefftest
ID:		xxxxxx
Created:	2017-03-28T22:54:50+0000
State:		deployed
Master URL:	https://169.47.xxx.xxx:xxxx
Ingress host:	-
Ingress secret:	-
Workers:	1
</code></pre>

<p>Lastly, you will need to get the token for your Kube cluster.  To do that run the following.</p>

<pre><code>kubectl get secrets | grep default-token
</code></pre>

<p>It will output something like the following:</p>

<pre><code>$ kubectl get secrets | grep default-token
default-token-gjswg      kubernetes.io/service-account-token   3         21h
</code></pre>

<p>In the following command replace xxxx with the couple of random characters from the command above.</p>

<pre><code>kubectl get secret default-token-xxxx -o yaml | grep token
</code></pre>

<p>It is going to output a bunch of stuff, you are going to want to copy the value for <code>token</code> for the next step.</p>

<p>With the copied value for <code>token</code> run the following, <strong>note</strong> the following will only work on Mac or Linux&hellip;  You will want to replace token with the really long value you copied.</p>

<pre><code>echo token | base64 --decode
</code></pre>

<p>If everything worked you have something outputted that starts with <code>ey</code>.  It if outputs some garbled text you probably copied it wrong, in writing this I missed a letter on the beginning of mine so be careful.</p>

<p>you can then use that in app for your token</p>

<p>Open up the Cabin app on your phone, if you haven&rsquo;t downloaded it you can download it from Google Play or the App Store by searching for <code>cabin kubernetes</code>.</p>

<p>Open the app enter the <code>Master URL</code> from a couple steps above in the URL field, make sure you have <code>https://</code> and the port after the IP address.</p>

<p>Under authentication tap <code>Token</code>, paste in the value for the token from the previous step, remember it starts with <code>ey</code>, for a configured cluster, see the screenshot below.</p>

<p><img src="http://www.jeffsloyer.io/images/cabin1-thumb.jpg" alt="Cabin Setup" /></p>

<p>Cabin is pretty cool, you can exec into containers and view logs and almost do anything with your Kube Cluster.  I would love to see the SkipppBox guys open source this&hellip;</p>

<p><img src="http://www.jeffsloyer.io/images/cabin2-thumb.jpg" alt="Cabin Overview" /></p>

<p><img src="http://www.jeffsloyer.io/images/cabin3-thumb.jpg" alt="Cabin Pods" /></p>

<p>Thats it, you are configured to connect to your Kubernetes cluster on the IBM Bluemix Containers Service.  Please leave any comments or feedback below.  If you are a Windows user I would love some comments on the steps to get this working :).</p>

<h2 id="known-issues">Known Issues</h2>

<ul>
<li>Tiller seems busted which deploys apps into the cluster.  For more info check out <a href="https://github.com/skippbox/cabin-issues/issues/24">this GitHub issue</a>.</li>
</ul>

<h2 id="feedback">Feedback</h2>

<p>Please reach out to us on Slack at <a href="https://ibm-container-service.slack.com">https://ibm-container-service.slack.com</a>.</p>

                </div>
                <div class="col-lg-4">
                  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<ins class="adsbygoogle"
     style="display:inline-block;width:300px;height:600px"
     data-ad-client="ca-pub-8023940796191232"
     data-ad-slot="6599663109"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

                </div>
            </div>
        </div>
    </article>

    
    <article>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                  <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "jeffsloyerio" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                </div>
            </div>
        </div>
    </article>


    <hr>
    
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                  <ul class="list-inline text-center">
                    <li>
                      <a href="mailto:">
                        <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-envelope-o fa-stack-1x fa-inverse"></i>
                        </span>
                      </a>
                    </li>
                    
                    <li>
                      <a href="https://twitter.com/jsloyer">
                        <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                        </span>
                      </a>
                    </li>
                    
                    <li>
                      <a href="https://github.com/jsloyer">
                        <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                        </span>
                      </a>
                    </li>
                    
                  </ul>
                  <p class="copyright text-muted">Code released under the Apache 2.0 license.</p>
                </div>
            </div>
        </div>
    </footer>

    
    <script src="http://www.jeffsloyer.io//js/jquery.min.js"></script>

    
    <script src="http://www.jeffsloyer.io//js/bootstrap.min.js"></script>

    
    <script src="http://www.jeffsloyer.io//js/clean-blog.js"></script>

    
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-404795-24', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

    <div id="amzn-assoc-ad-56bb13cb-e928-41ff-8b04-58d58ca6838a"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=56bb13cb-e928-41ff-8b04-58d58ca6838a"></script>

<div id="amzn-assoc-ad-c9b5cb08-15ec-45ce-97df-1c189eeb43d3"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=c9b5cb08-15ec-45ce-97df-1c189eeb43d3"></script>

</body>

</html>

